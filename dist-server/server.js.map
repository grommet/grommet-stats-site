{"version":3,"sources":["../server/server.js"],"names":["PORT","process","env","GITHUB_TOKEN","GITHUB_ORGANIZATION","app","use","json","get","req","res","githubOrgStats","authenticate","then","send","result","catch","error","console","log","status","static","join","__dirname","sendFile","resolve","server","createServer","listen"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;;;AAEA,IAAMA,OAAOC,QAAQC,GAAR,CAAYF,IAAZ,IAAoB,IAAjC;AACA,IAAMG,eAAeF,QAAQC,GAAR,CAAYC,YAAjC;AACA,IAAMC,sBAAsBH,QAAQC,GAAR,CAAYE,mBAAZ,IAAmC,SAA/D;;AAEA,IAAMC,MAAM,yBACTC,GADS,CACL,4BADK,EAETA,GAFS,CAEL,6BAFK,EAGTA,GAHS,CAGL,sBAAO,MAAP,CAHK,EAITA,GAJS,CAIL,qBAAWC,IAAX,EAJK,CAAZ;;AAMAF,IAAIG,GAAJ,CAAQ,YAAR,EAAsB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAClC,MAAMC,iBAAiB,6BAAmBR,YAAnB,EAAiCC,mBAAjC,CAAvB;AACAO,iBACGC,YADH,GAEGC,IAFH,CAEQ;AAAA,WAAMF,eAAeH,GAAf,EAAN;AAAA,GAFR,EAGGK,IAHH,CAGQ;AAAA,WAAUH,IAAII,IAAJ,CAASC,MAAT,CAAV;AAAA,GAHR,EAIGC,KAJH,CAIS,UAACC,KAAD,EAAW;AAChBC,YAAQC,GAAR,CAAYF,KAAZ;AACAP,QAAIU,MAAJ,CAAW,GAAX,EAAgBN,IAAhB,CAAqB,+BAArB;AACD,GAPH;AAQD,CAVD;;AAYA;AACAT,IAAIC,GAAJ,CAAQ,GAAR,EAAa,kBAAQe,MAAR,CAAe,eAAKC,IAAL,CAAUC,SAAV,EAAqB,UAArB,CAAf,CAAb;AACAlB,IAAIG,GAAJ,CAAQ,IAAR,EAAc,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC1BA,MAAIc,QAAJ,CAAa,eAAKC,OAAL,CAAa,eAAKH,IAAL,CAAUC,SAAV,EAAqB,qBAArB,CAAb,CAAb;AACD,CAFD;;AAIA,IAAMG,SAAS,eAAKC,YAAL,CAAkBtB,GAAlB,CAAf;AACAqB,OAAOE,MAAP,CAAc5B,IAAd;;AAEAkB,QAAQC,GAAR,yCAAkDnB,IAAlD","file":"server.js","sourcesContent":["import compression from 'compression';\nimport express from 'express';\nimport http from 'http';\nimport morgan from 'morgan';\nimport bodyParser from 'body-parser';\nimport cookieParser from 'cookie-parser';\nimport path from 'path';\n\nimport GithubOrgStats from 'github-org-stats';\n\nconst PORT = process.env.PORT || 8102;\nconst GITHUB_TOKEN = process.env.GITHUB_TOKEN;\nconst GITHUB_ORGANIZATION = process.env.GITHUB_ORGANIZATION || 'grommet';\n\nconst app = express()\n  .use(compression())\n  .use(cookieParser())\n  .use(morgan('tiny'))\n  .use(bodyParser.json());\n\napp.get('/api/stats', (req, res) => {\n  const githubOrgStats = new GithubOrgStats(GITHUB_TOKEN, GITHUB_ORGANIZATION);\n  githubOrgStats\n    .authenticate()\n    .then(() => githubOrgStats.get())\n    .then(result => res.send(result))\n    .catch((error) => {\n      console.log(error);\n      res.status(403).send('You do not have a valid token');\n    });\n});\n\n// UI\napp.use('/', express.static(path.join(__dirname, '/../dist')));\napp.get('/*', (req, res) => {\n  res.sendFile(path.resolve(path.join(__dirname, '/../dist/index.html')));\n});\n\nconst server = http.createServer(app);\nserver.listen(PORT);\n\nconsole.log(`Server started at http://localhost:${PORT}`);\n"]}